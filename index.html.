<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Loja do Vov√¥ - V1.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        /* Estilo para garantir que a impress√£o saia apenas a etiqueta */
        @media print {
            body * { visibility: hidden; }
            #area-impressao, #area-impressao * { visibility: visible; }
            #area-impressao { position: absolute; left: 0; top: 0; width: 100%; }
            .no-print { display: none; }
        }
    </style>
</head>
<body class="bg-slate-900 min-h-screen flex items-center justify-center p-4">

    <div class="max-w-md w-full bg-white rounded-3xl shadow-2xl overflow-hidden border-4 border-yellow-500">
        <div class="bg-yellow-500 p-6 text-center">
            <h1 class="text-2xl font-black text-slate-900 uppercase tracking-tighter">Gerador de Etiquetas</h1>
            <p class="text-sm font-bold text-slate-800 opacity-80">PRODUTOS DO BR√ÅS</p>
        </div>

        <div class="p-6 space-y-6">
            <div class="no-print">
                <label class="block text-sm font-black text-slate-700 mb-2 uppercase">Nome do Produto</label>
                <input type="text" id="nome" placeholder="Ex: Boia de Bra√ßo" 
                    class="w-full p-4 bg-slate-100 border-2 border-transparent focus:border-yellow-500 rounded-2xl outline-none transition-all font-semibold text-slate-800">
            </div>

            <div class="no-print">
                <label class="block text-sm font-black text-slate-700 mb-2 uppercase">Pre√ßo de Venda (R$)</label>
                <input type="number" id="preco" step="0.01" placeholder="0,00" 
                    class="w-full p-4 bg-slate-100 border-2 border-transparent focus:border-yellow-500 rounded-2xl outline-none transition-all font-bold text-2xl text-green-600">
            </div>

            <button onclick="gerarEtiqueta()" 
                class="no-print w-full bg-blue-600 hover:bg-blue-700 text-white font-black py-5 rounded-2xl shadow-lg transition-all active:scale-95 text-xl uppercase">
                Criar QR Code
            </button>

            <div id="resultado" class="hidden mt-4 p-6 border-4 border-dashed border-slate-200 rounded-3xl flex flex-col items-center bg-white shadow-inner">
                <div id="area-impressao" class="flex flex-col items-center p-4 bg-white">
                    <div id="qrcode" class="mb-4"></div>
                    <div class="text-center">
                        <p id="txt-nome" class="text-xl font-black text-slate-900 uppercase leading-none"></p>
                        <p id="txt-preco" class="text-3xl font-black text-blue-700"></p>
                    </div>
                </div>
                
                <button onclick="window.print()" class="no-print mt-6 flex items-center gap-2 text-blue-600 font-bold hover:underline">
                    <span>üñ®Ô∏è</span> Imprimir Etiqueta
                </button>
            </div>
        </div>
    </div>

    <script>
        function gerarEtiqueta() {
            const nomeInput = document.getElementById('nome');
            const precoInput = document.getElementById('preco');
            const qrcodeDiv = document.getElementById('qrcode');
            const resultadoArea = document.getElementById('resultado');

            // Valida√ß√£o simples
            if (!nomeInput.value || !precoInput.value) {
                alert("Aten√ß√£o Expert! Preencha o nome e o pre√ßo.");
                return;
            }

            // Limpar QR Code anterior para n√£o acumular
            qrcodeDiv.innerHTML = "";

            // Formatar pre√ßo para o padr√£o brasileiro
            const precoFormatado = parseFloat(precoInput.value).toLocaleString('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            });

            // Dados que o Scanner vai ler
            // Usamos um formato simples: NOME|PRECO
            const dadosParaScanner = `PROD:${nomeInput.value}|VAL:${precoInput.value}`;

            // Gerar o QR Code
            new QRCode(qrcodeDiv, {
                text: dadosParaScanner,
                width: 180,
                height: 180,
                colorDark : "#0f172a", // Slate-900
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H // N√≠vel de corre√ß√£o alto para evitar erro de leitura
            });

            // Atualizar textos da etiqueta
            document.getElementById('txt-nome').innerText = nomeInput.value;
            document.getElementById('txt-preco').innerText = precoFormatado;

            // Mostrar a √°rea do resultado
            resultadoArea.classList.remove('hidden');
        }
    </script>
</body>
</html>
